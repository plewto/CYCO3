<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="index,follow,archive">
    <meta name="description" content="CYCO Documentation">
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="icon" href="icon.png"/>
    <title>CYCO Instruments</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'/>
    
</head>

<body>
<div id="page_wrapper">
<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="meta-channels.html">Meta-Channels</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="program-maps.html">Program-Maps</a>

<h2 class="section-head">Instruments</h2>
<hr/>
<p class="body">
    An <i>Instrument</i>&nbsp; is a&nbsp;<a href="nodes.html">cyco-node</a>    &nbsp;which defines    the properties of an external MIDI device.  Essentially they are proxies for     external gear.  All Instruments are linked together in a tree rooted at     <br><b>+ROOT-INSTRUMENT+</b>.  CYCO does not define an 'orchestra' object perse,      instead the term 'orchestra' indicates the tree built on top of +ROOT-INSTRUMENT+.</p>
<p class="body">
    <strike>The lower branches of the orchestra are usually defined during&nbsp;<a href="configuration.html">configuration</a>    &nbsp;while Projects extend the orchestra for their specific needs.&nbsp; For example an Oberheim     synthesizer may be available, this would best be defined as a permanent instrument during     configuration.  A project may use the Oberheim for a bass part, this instrument would best     be defined at the project level by making 'bass' a child instrument off 'Oberheim'.    The Oberheim proper would establish MIDI channel and any other common parameters.      The project-level bass instrument would set the specific program number.  The project may     define any number of additional instruments off the Oberheim.</strike></p>
<p class="body">
    In practice instruments are divided into two group:</p>
<ul>
    <li>Non-Transient</li>
    <li>Transient</li>
</ul>
<p class="body">
    <strike>Non-transient instruments are defined by the    configuration process.  These are instruments     which form the permanent collection of external gear.  Transient instruments are     defined at the project level,  these instruments are pruned from the orchestra when a     new project is created.  The project then defines it's own set of instruments.</strike></p>
<p class="footnote">The reason for this transient/non-transient nonsense is to prevent the 
orchestra from building up with unnecessary duplicate instruments.  While developing a 
project it is not uncommon to repeatably reload it multiple times.  With each reload the 
project defines a set of instruments.  If the old instruments are not removed the orchestra
quickly becomes clogged with duplicates.   On the other hand you do not want remove the 
permanent instruments each time a project is loaded.</p>
<h4 class="section-head">Instrument Properties</h4>
<ul>
    <li><a href="program-maps.html">program-maps</a>
</li>
    <li><a href="program-maps.html#program-number">program-number</a>
</li>
    <li><a href="program-maps.html#program-number">program-bank</a>
</li>
    <li><a href="keynumber-maps.html">keynumber-map</a>
</li>
    <li><a href="dynamic-maps.html">dynamic-map</a>
</li>
    <li><a href="dynamic-maps.html#articulation">articulation-map</a>
</li>
    <li>channel</li>
    <li>channel-index</li>
</ul>
<b class="definition">(INSTRUMENT-P obj)</b><br>
<p class="synopsis">Predicate, true if argument is an instrument.</p>
<b class="definition">(PROGRAM-MAP! instrument pmap)</b><br>
<b class="definition">(PROGRAM-MAP instrument)</b><br>
<p class="synopsis">Sets/returns instrument's program-map</p>
<b class="definition">(PROGRAM-NUMBER! instrument n)</b><br>
<b class="definition">(PROGRAM-NUMBER instrument)</b><br>
<b class="definition">(PROGRAM-BANK! instrument n)</b><br>
<b class="definition">(PROGRAM-BANK instrument)</b><br>
<p class="synopsis">Sets/returns instrument's default program number and bank.</p>
<b class="definition">(PROGRAM-CHANGE-EVENTS instrument time &key bank program</b><br>
<p class="synopsis">Generates list of MIDI events for program-change.
Unless specified,the instruments default program-number and bank are used.</p>
<b class="definition">(KEYNUMBER-MAP! instrument mapfn)</b><br>
<b class="definition">(KEYNUMBER-MAP instrument)</b><br>
<b class="definition">(ARTICULATION-MAP! instrument mapfn)</b><br>
<b class="definition">(ARTICULATION-MAP instrument)</b><br>
<b class="definition">(DYNAMIC-MAP! instrument mapfn)</b><br>
<b class="definition">(DYNAMIC-MAP instrument)</b><br>
<p class="synopsis">These functions set or return the indicated mapping functions.</p>
<b class="definition">(CHANNEL! instrument c)</b><br>
<p class="synopsis">Sets instrument's channel.  c may be an absolute MIDI channel or a
defined 'meta' channel.</p>
<b class="definition">(CHANNEL instrument &optional resolve)</b><br>
<p class="synopsis">Returns instrument's MIDI channel.  
The optional resolve flag indicates if the result should be converted
to an actual MIDI channel.  See Meta channels.</p>
<b class="definition">(CHANNEL-INDEX instrument)</b><br>
<p class="synopsis">Returns the 'real' MIDI channel byte.</p>
<b class="definition">+ROOT-INSTRUMENT+</b><br>
<p class="synopsis">+root-instrument+ is at then root of the orchestra tree and defines 
sane defaults.  All instruments ultimately inherit from +root-instrument+.</p>
<b class="definition">NULL-INSTRUMENT</b><br>
<p class="synopsis">The null-instrument is an instrument which does not generate 
MIDI events.  It may be used as a place holder instrument.</p>
<b class="definition">(MAKE-INSTRUMENT name &key parent transient channel program bank keynumber-map dynamic-map articulation-map remarks)</b><br>
<b class="definition">(INSTRUMENT name &key parent transient channel program bank keynumber-map dynamic-map articulation-map remarks)</b><br>
<p class="synopsis">MAKE-INSTRUMENT creates a new instance of instrument.  The INSTRUMENT macro 
has the same signature as MAKE-INSTRUMENT.  The only difference is that INSTRUMENT binds the 
new instance to a symbol with the same name.  The following two lines are equivalent.</p>
<pre class="code">
(param foo (make-instrument 'foo ....))  ;; name must be quoted
(instrument foo ...)                     ;; name must -not- be quoted
</pre>
<p class="synopsis">Arguments to MAKE-INSTRUMENT and INSTRUMENT</p>
<pre class="code">
:parent - the parent instrument, default +ROOT-INSTRUMENT+
<strike>
:transient - Boolean, Instruments created during configuration should set
             transient to nil.  Instruments created by a project should set
             transient to t.  Default t.
</strike>
:channel - MIDI channel,  see Meta Channels.
:program - Default program number.  The program number form is dependent 
           on the program-map function.  
:bank - Default program bank.  The program bank form is dependent on 
           on the program-nap function.
:keynumber-map - See keynumber-maps, defaults to a basic identity map.
:dynamic-map - See dynamic-maps, defaults to a basic identity map.
:articulation-map - See articulation-maps, defaults to a basic identity map.
:remarks - Optional remarks text.
</pre>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#top">Top</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="meta-channels.html">Meta-Channels</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="program-maps.html">Program-Maps</a>

</div>
</body>
</html>
