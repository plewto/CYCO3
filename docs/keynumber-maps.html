<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="index,follow,archive">
    <meta name="description" content="CYCO Documentation">
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="icon" href="icon.png"/>
    <title>CYCO Keynumber Maps</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'/>
    
</head>

<body>
<div id="page_wrapper">
<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="program-maps.html">Program-Maps</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="dynamic-maps.html">Dynamic-Maps</a>

<h2 class="section-head">Keynumber Maps</h2>
<hr/>
<p class="body">
    a <i>keynumber-map</i>&nbsp; is a function which maps     it's argument to a MIDI key number.</p>
<pre class="code">
(lambda kn)  --&gt; int
</pre>
<p class="body">
    Where kn argument type is undefined and result is an integer between -1 and    127 inclusive.  A negative result indicates a rest.   The kn argument does have     some specifications.  First if it has the value :DOC the map should display     documentation text and return -1.  Most maps, but by no means all, will treat an     integer kn as a literal MIDI keynumber. A few general key-maps are pre-defined.    Most maps should return -1 for all unrecognized arguments.</p>
<ul>
    <li><a href="#basic-keymap">Basic</a>
</li>
    <li><a href="#circular-keymap">Circular</a>
</li>
    <li><a href="#symbolic-keymap">Symbolic</a>
</li>
    <li><a href="#metronome-keymap">Metronome</a>
</li>
</ul>
<a id="basic-keymap"></a>
<b class="definition">(BASIC-KEYNUMBER-MAP &key min max transpose)</b><br>
<p class="synopsis">Creates a basic keynumber map</p>
<pre class="code">

:min  - Minimum value, keynumbers below min return a rest, -1, default 0.
:max  - Maximum value, keynumbers greater then max return a rest, default 127.
:transpose - Transposition in half-steps.  
             Transposition is applied after the range test, default 0.
</pre>
<a id="circular-keymap"></a>
<b class="definition">(CIRCULAR-KEYNUMBER-MAP start end)</b><br>
<p class="synopsis">Creates map where keynumbers between start and end are returned in a circular manner.
Circular maps are useful for certain percussion instruments such as shakers.</p>
<pre class="code">
A circular map foo where start=10 and end=12 has the following response. 

(foo 0) --&gt; 10
(foo 1) --&gt; 11
(foo 2) --&gt; 12
(foo 3) --&gt; 10
(foo 4) --&gt; 11
(foo 'whatever) --&gt; -1  
...
</pre>
<a id="symbolic-keymap"></a>
<b class="definition">(SYMBOLIC-KEYNUMBER-MAP assignments)</b><br>
<p class="synopsis">Creates keynumber map using symbolic key names.  A symbolic key map
is useful with percussion instruments.</p>
<pre class="code">
The assignments are in the form of a nested list:

((sym1 . keynumber-1)
 (sym2 . keynumber-2)
 (sym3 . keynumber-3)
  ...)

An example of using a symbolic keynumber map with a drum instrument.
(instrument drum 
            :keynumber-map (symbolic-keynumber-map '((snare . 34)
                                                     (kick  . 36)
                                                     (hihat . 48)
                                                     ...........))))
</pre>
<a id="metronome-keymap"></a>
<b class="definition">(METRONOME-KEYNUMBER-MAP &key phrase bar beat)</b><br>
<p class="synopsis">A special case symbolic map specifically for metronome instruments.
Metronomes create three events:</p>
<ul>
    <li>PHRASE - occurs when the phrase repeats,  the first beat of the first bar.</li>
    <li>BAR - occurs on the first beat of bar, except for the first bar.</li>
    <li>BEAT - occurs on all other beats.</li>
</ul>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#top">Top</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="program-maps.html">Program-Maps</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="dynamic-maps.html">Dynamic-Maps</a>

</div>
</body>
</html>
