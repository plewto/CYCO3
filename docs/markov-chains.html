<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="index,follow,archive">
    <meta name="description" content="CYCO Documentation">
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="icon" href="icon.png"/>
    <title>Markov-Chains</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'/>
    
</head>

<body>
<div id="page_wrapper">
<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="patterns.html">Patterns</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="shift-register.html">Shift-Register</a>

<h2 class="section-head">Markov Chains</h2>
<hr/>
<p class="body">
    Creating a Markov pattern requires two steps:</p>
<ol>
    <li>Create a graph using <em>MARKOV-LINK</em>&nbsp; objects.</li>
    <li>Embed the graph in a <em>MARKOV-CHAIN</em>&nbsp; pattern.</li>
</ol>
<p class="body">
    A <em>MARKOV-LINK</em>&nbsp; has a value and a list of potential next values.      The elements of the list are themselves markov-links        and the more times    a specific value occurs in the list the probability of it being the next     value increases.</p>
<b class="definition">(markov-link value)</b><br>
<p class="synopsis">Create new instance of Markov-Link with indicated value.  The value may be 
of any type.  If it is a Pattern, then upon selection the NEXT-1 method is called.</p>
<b class="definition">(markov-add-link source destination weight)</b><br>
<p class="synopsis">Adds new link to a markov-link</p>
<pre class="code">
origin      - A Markov-Link
destination - Another Markov-Link, a potential next value for the origin.
              source and destination may be the same object.
weight      - integer, number of times destination is added to origin list.
              Higher values increase probability of selection.
</pre>
<b class="definition">(markov-walk markov-link)</b><br>
<p class="synopsis">Randomly select a new value from those available.<br>
Returns the next markov-link.</p>
<hr/>
<h4 class="section-head">An Example</h4>
<img class="center" src="markov_01.png" alt="Markov Chain Example"/>
<pre class="code">
(param ape (markov-link 'ape))
(param bat (markov-link 'bat))
(param cat (markov-link 'cat))
(param dog (markov-link 'dog))
(param elk (markov-link 'elk))
(markov-add-link ape bat 3)
(markov-add-link ape cat 4)
(markov-add-link bat cat 2)
(markov-add-link bat dog 3)
(markov-add-link cat dog 1)
(markov-add-link cat elk 2)
(markov-add-link dog elk 1)
(markov-add-link elk ape 5)
(markov-add-link elk bat 3)

(let ((current ape))
  (dotimes (i 20)
    (format t "~A " (value current))
    (setf current (markov-walk current))))
--&gt; APE CAT ELK APE BAT CAT ELK APE BAT DOG ELK APE BAT DOG ELK BAT DOG ELK BAT DOG 

</pre>
<hr/>
<h4 class="section-head">Markov Chains as Patterns</h4>
<p class="body">
    To treat a Markov graph as a Pattern,     embed it in a <em>MARKOV-CHAIN</em>&nbsp; object.</p>
<b class="definition">(MARKOV-CHAIN root)</b><br>
<p class="synopsis">Create Pattern by linking to a Markov Graph.&nbsp;
 Using the above graph as an example:</p>
<pre class="code">
(param foo (markov-chain ape))

(next foo 20)  
--&gt; (APE CAT DOG ELK BAT DOG ELK APE CAT ELK BAT CAT ELK APE BAT DOG ELK APE CAT ELK)
</pre>
<p class="body">
    If the 'value' of a Markov-Chain is a pattern, then when it is selected,     the pattern is evaluated to return it's next value.        If in the above example the definition of cat is replaced with</p>
<pre class="code">
(param cat (markov-link (cycle :of '(lion tiger puma))))
</pre>
<p class="body">
    and everything else is left as is, the above run would have produced:</p>
<pre class="code">
(APE LION DOG ELK BAT DOG ELK APE TIGER ELK BAT PUMA ELK APE BAT DOG ELK APE LION ELK)
</pre>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#top">Top</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="patterns.html">Patterns</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="shift-register.html">Shift-Register</a>

</div>
</body>
</html>
