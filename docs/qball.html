<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="index,follow,archive">
    <meta name="description" content="CYCO Documentation">
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="icon" href="icon.png"/>
    <title>CYCO QBall Pattern</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'/>
    
</head>

<body>
<div id="page_wrapper">
<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="event-timing.html">Event-Timing</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="strummer.html">Strummer</a>

<h4 class="section-head">QBall</h4>
<hr/>
<p class="body">
    A <i>QBall</i>&nbsp; is a type of Recombinant <a href="parts.html">Part</a>    &nbsp; that creates events by combining <a href="instruments.html">Instrument,</a>    <a href="keynumbers.html">Keynumber,</a>    <a href="metrics.html">Articulation</a>    &nbsp;and&nbsp;<a href="dynamics.html">Dynamic</a>    &nbsp;<a href="patterns.html">Patterns.</a>    &nbsp;It is particularly suited for percussion parts.  A typical usage     looks something like this:</p>
<pre class="code">
(qball foo snare
    :cue '((1 1 1)(1 2 1)(1 3 3)(1 4 3))
    :key '(x x rim)
    :amp (cycle :of (list 'ff (dice :of '(f mf mp)))))
</pre>
<p class="body">
    This example uses a snare instrument whose <a href="keynumber-maps.html">keynumber-map</a>    &nbsp;presumably recognizes 'X and 'RIM as key-numbers.&nbsp; The :CUE list     specifies 4-events and the three-note key list is converted to a&nbsp;<a href="patterns.html#cycle">Cycle Pattern</a>    The :AMP pattern alternates between an FF dynamic and one     randomly chosen by the Dice pattern.</p>
<b class="definition">(MAKE-QBALL name instruments &keys ...)</b><br>
<b class="definition">(QBALL name instruments &keys ...)</b><br>
<p class="synopsis">Creates new QBALL part in current section.  MAKE-QBALL and
QBALL are nearly identical.  The only difference is that QBALL binds the 
new object to a symbol with the same name, while MAKE-QBALL does not.
The following two lines are equivalent</p>
<pre class="code">
(param foo (make-qball 'foo ...))   ;; name must be quoted symbol
(qball foo ...)                     ;; name must -not- be quoted

Keywords

:section      - parent section, defaults to current-section of *project*
:cuefn        - cue-function, inherited from section.
:shift        - float, offset in seconds added to all events, default 0.0
:tempo        - time-signature tempo, inherited from section 
:unit         - time-signature beat-unit, inherited from section 
:bars         - time-signature bar-count, inherited from section 
:beats        - time-signature beats per bar, inherited from section
:subbeats     - time-signature subbeats per beat, inherited from section
:render-once  - Boolean, if true the qball events are produced once only 
                and not repeated.
:transposable - Boolean, if true this part is subject to transpose and
                key invert transformations.
:reversible   - Boolean, if true this part is subject to retrograde
                transformations.
:cue          - <a href='#cue-list'>See below</a>
:key          - <a href='#key-pattern'>See below</a>
:dur          - <a href='#articulation-pattern'>See below</a>
:amp          - <a href='#dynamic-pattern'>See below</a>
:reset-on-repeat - <a href='#reset-on-repeat'>See below</a>
:remarks      - Optional remarks text.
</pre>
<a id="instrument-pattern"></a>
<hr/>
<h4 class="section-head">Instrument Pattern</h4>
<p class="body">
    The instruments argument may take one of three forms:</p>
<ol>
    <li>List of instruments - layer together, all instruments play every event.</li>
    <li>Single instrument - Treated as a list of one instrument.</li>
    <li>Pattern - pattern types determines instrument usage.</li>
</ol>
<pre class="code">
(qball foo (list piano organ) ...)
     
       piano and organ are layered.

(qball foo organ ...)

       As above with single instrument.

(qball foo (cycle :of (list piano organ) ...))

        Piano and organ produce alternate notes.
</pre>
<a id="cue-list"></a>
<hr/>
<h4 class="section-head">CUE list</h4>
<p class="body">
    The cue-list sets the number and time for each event.  By default cue-list    uses the <a href="event-timing.html">BAR cue-function</a>    </p>
<pre class="code">
:cue '((1 1 1)(1 2 1)(1 3 1)(1 4 1))  ;; Produces events on each beat of bar 1.
</pre>
<p class="body">
    Alternate <a href="event-timing.html#cue-functions">cue-functions</a>    &nbsp;are selected using the :CUEFN argument.</p>
<a id="key-pattern"></a>
<hr/>
<h4 class="section-head">KEY Pattern</h4>
<p class="body">
    The :KEY argument sets the&nbsp;<a href="keynumbers.html">keynumber</a>    &nbsp;<a href="patterns.html">pattern</a>    &nbsp;with the default pattern being a Cycle.</p>
<pre class="code">
:key '(c4 e4 g4)   --> (cycle :of '(c4 e4 g4))
</pre>
<p class="body">
    Chords are produced by nested list.  The following is a C-major arpeggio    followed by an inverted a-minor chord.</p>
<pre class="code">
:key '(c4 e4 g4 (c4 e4 a4))
</pre>
<p class="body">
    Prior to use each key-number is processed by the instrument's&nbsp;<a href="keynumber-maps.html">keynumber-map.</a>    &nbsp;Unrecognized keys are treated as a rest.&nbsp; The following    example layers snare and tom instruments.  The snare recognizes     'X 'RIM and 'BOUNCE, the tom recognizes 'X and 'BOUNCE but     not 'RIM.</p>
<pre class="code">
(instrument snare :channel 10
    :keynumber-map (symbolic-keynumber-map '((x . 30)
                                             (rim . 32)
                                             (bounce . 34))))
(instrument tom :channel 10
    :keynumber-map (symbolic-keynumber-map '((x . 60)
                                             (bounce . 64))))

(qball percussion (list snare tom)
   :cue '((1 1 1)(1 2 1)(1 3 1))
   :key '(x rim bounce))
</pre>
<p class="body">
    The snare plays all three events, the tom ignores the RIM key     to produce two events.</p>
<a id="articulation-pattern"></a>
<hr/>
<h4 class="section-head">Articulation (note duration) Patterns</h4>
<p class="body">
    The articulation pattern defaults to a cycle.</p>
<pre class="code">
:dur '(q h w) --> (cycle :of '(q h w))
</pre>
<p class="body">
    Articulations which are&nbsp;<a href="metrics.html">metric values</a>    &nbsp;are scaled by the current tempo.  Numeric values are absolute and    not effected by tempo.</p>
<pre class="code">
:dur '(w)     --> 4 seconds for tempo 60 BPM.
:dur '(w)     --> 2 seconds for tempo 120
:dur '(3)     --> 3-seconds, not effected by tempo.
</pre>
<p class="footnote">The response to unrecognized articulation values is poorly defined.
Currently (2018.11.17) an error is produced.  I think a better approach
is to ignore any unrecognized value and return a rest, or at least make  
the warning optional. This would be consistent with the keynumber usage.</p>
<p class="warning">QBALL may have a bug when processing articulation values which should be treated
as a REST.  An unknown or rest articulation should produce no events, instead QBALL
<i>may</i> be creating a note-on event but not the corresponding note-off.  This would 
cause a stuck note for a note which should not be playing at all.   It is unknown if
this is actually the case or if it effects other Part types - testing is needed.
BUG number 0001</p>
<a id="dynamic-pattern"></a>
<hr/>
<h4 class="section-head">Dynamics Pattern</h4>
<p class="body">
    The&nbsp;<a href="dynamics.html">dynamics</a>    &nbsp;pattern defaults to a cycle.</p>
<pre class="code">
:amp '(p pp ppp)  --> (cycle :of '(p pp ppp))
</pre>
<p class="footnote">The response to unrecognized dynamics values is poorly defined.
Currently (2018.11.17) an error is produced.</p>
<a id="reset-on-repeat"></a>
<hr/>
<h4 class="section-head">Reset On Repeat</h4>
<p class="body">
    When the length of a QBALL is less then that of the section, it is repeated     as needed to fill the section duration <nobr>(assuming :RENDER-ONCE is nil).</nobr>    The :RESET-ON-REPEAT flag indicates if the internal patterns are reset prior to    each repetition.   If RESET-ON-REPEAT is true then each repetition will have the     same events (ignoring any random patterns like dice, coin, etc).  If     RESET-ON-REPEAT is nil then the patterns continue where they left off from the     previous repetition.</p>
<pre class="code">
(section foo :bars 4)

(qball foo-piano piano
   :bars 1
   :reset-on-repeat t
   :cue '((1 1 1)(1 2 1)(1 3 1)(1 4 1))   ;; 4-events
   :key '(c3 e3 g3)                       ;; 3-keys
   :amp '(f mf mp p pp))                  ;; 5-dynamic levels

foo-piano repeats same pattern on each repetition
   (1 1 1) c3 f
   (1 2 1) e3 mf
   (1 3 1) g3 mp
   (1 4 1) c3 p
   (2 1 1) c3 f   ;; repeat at bar 2.
   (2 2 1) e3 mf

(qball foo-organ
  :bars 1
  :reset-on-repeat nil
  :cue '((1 1 1)(1 2 1)(1 3 1)(1 4 1))   ;; 4-events
  :key '(c3 e3 g3)                       ;; 3-keys
  :amp '(f mf mp p pp))                  ;; 5-dynamic levels

foo-organ does not repeat
   (1 1 1) c3 f
   (1 2 1) e3 mf
   (1 3 1) g3 mp
   (1 4 1) c3 p
   (2 1 1) e3 pp   ;; start bar 2, patterns continue
   (2 2 1) g3 f
   (2 3 1) c3 mf
   (2 4 1) e3 mp
</pre>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#top">Top</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="event-timing.html">Event-Timing</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="strummer.html">Strummer</a>

</div>
</body>
</html>
