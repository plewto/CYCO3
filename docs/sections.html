<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="index,follow,archive">
    <meta name="description" content="CYCO Documentation">
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="icon" href="icon.png"/>
    <title>CYCO Sections</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'/>
    
</head>

<body>
<div id="page_wrapper">
<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="projects.html">Projects</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="parts.html">Parts</a>

<h2 class="section-head">Sections</h2>
<hr/>
<p class="body">
    A <i>Section</i> extends <a href="time-signature.html">Time-Signature</a>    &nbsp;and represents a major composition division.</p>
<p class="body">
    Sections are the middle layer,  they are always a child of a&nbsp;<a href="projects.html">Project</a>    &nbsp;and only have&nbsp;<a href="parts.html">Parts</a>    &nbsp;as child nodes.</p>
<p class="body">
    The primary job of a section is to be a container for it's parts.      Sections often override project time-signature values and they may     mute or solo individual parts or&nbsp;<a href="#groups">groups</a>    &nbsp;of parts.</p>
<p class="body">
    Sections may be saved to MIDI files separate from the main project.</p>
<b class="definition">(MAKE-SECTION name &keys ...)</b><br>
<b class="definition">(SECTION name &keys ...)</b><br>
<p class="synopsis">MAKE-SECTION and SECTION are nearly identical, the primary 
difference is that SECTION binds the new object to a symbol with the same 
name and MAKE-SECTION does not.  The following two lines are equivalent:</p>
<pre class="code">
(param verse (make-section 'verse ...))  ;; name must be quoted
(section verse ...)	                 ;; name must -not- be quoted


keyword arguments

:tempo        - float, tempo in BPM, defaults to project value.
:unit         - symbol, time-signature beat-unit, defaults to project value.
:bars         - int, length of section in bars, defaults to project value.
:beats        - int, number of beats per bar, defaults to project value.
:subbeats     - int, number of subbeats per beat, defaults to project value.
:cuefn        - function, defaults to project value.
:transposable - Boolean, if nil the section is not effected by transpose
                and key-inversion operations. May be overridden by individual
                parts.
:reversible   - Boolean, if true the section is not effected by retrograde 
                operations. May be overridden by individual parts.
:remarks      - Optional remarks text solely for the users use.
:project      - The parent project, defaults to *PROJECT*
</pre>
<a id="groups"></a>
<b class="definition">(GROUP name members)</b><br>
<p class="synopsis">Creates a new Group in the current section.  The group object is bound to the 
symbol name</p>
<pre class="code">
name  - Symbol, the group name, do -not- quote.
members - List of member part names.  The parts must exists within the section.

Example: 
(group percussion '(snare kick toms))
</pre>
<b class="definition">(MUTE-ALL section)</b><br>
<b class="definition">(UNMUTE-ALL section)</b><br>
<p class="synopsis">Mute/unmute all parts in section</p>
<b class="definition">(MUTE group-or-part &optional state)</b><br>
<p class="synopsis">Change mute state of group or part.  Possible states are:</p>
<pre class="code">
:mute  - mute part or all members of group.
:unmute - unmute part or all members of group.
:solo   - unmute this part or group, mute all sibling groups or parts.
</pre>
<b class="definition">(CLONE section &key new-name new-parent)</b><br>
<p class="synopsis">Creates a clone of the section and all of it's member parts.</p>
<pre class="code">
:new-name   - By default the clone has the same name as the original. new-name
               specifies a format string to convert the original name to the 
               new-name.

:new-parent - By default the clone has the same parent as the original.  
              new-parent is used to change the parent of the clone.
</pre>
<b class="definition">(TRANSPOSE section n)</b><br>
<p class="synopsis">Transpose all notes by n half-steps.
Only parts whose transposable property is true are effected.</p>
<b class="definition">(INVERT section pivot)</b><br>
<p class="synopsis">Apply key inversion around pivot key.
Only parts whose transposable property is true are effected.</p>
<b class="definition">(RETROGRADE section)</b><br>
<p class="synopsis">Reverse note order.
Only parts whose reservable property is true are effected.</p>
<b class="definition">(RENDER-ONCE section &key (offset 0.0))</b><br>
<p class="synopsis">Convert section to list of&nbsp; <a href="midi-events.html">MIDI events.</a>
</p>
<b class="definition">(RENDER-N section count &key (offset 0.0))</b><br>
<p class="synopsis">Render section to MIDI event list count times.
Each repetition is aligned at the end of the previous one.
Each event is shifted by offset seconds.</p>
<b class="definition">(->SMF section &key filename offset repeat pad)</b><br>
<p class="synopsis">Save section events to Standard MIDI File.</p>
<pre class="code">
:filename - MIDI filename relative to the projects MIDI directory.
             For project foo and section verse, defaults to 
             ~/cyco-projects/foo/MIDI/verse.mid
:offset - Time in seconds added to each event, default 0.0
:repeat - Int, number of times to repeat section, default 1.
:pad	- Float, number of seconds added to end of track, default 2.0.

Muted groups and parts do not contribute to the output.
</pre>
<b class="definition">(MAKE-COUNTIN &key name ...)</b><br>
<b class="definition">(COUNTIN &key ...)</b><br>
<p class="synopsis"><i>Countin</i>&nbsp; is a specialized section 
for metronome countin and MIDI initialization.  It is
intended to be placed first in the project seq-order.<br><br>

MAKE-COUNTIN takes a name argument.&nbsp; With COUNTIN the 
name is automatically set to 'COUNTIN and the object is bound
to the symbol COUNTIN.</p>
<pre class="code">
The following two lines are equivalent:

(param countin (make-countin :name 'countin))
(countin)
	
Keywords:
	   
:name        - symbol, (make-countin only)
:project     - defaults to *PROJECT*
:tempo       - defaults to project's value
:unit        - defaults to project's value 
:bars        - defaults to project's value
:beats       - defaults to project's value
:subbeats    - defaults to project's value
:instruments - List of instruments.  Program change events are
               generated for each instrument.
:metronome   - Instrument used to produce metronome tones.
:remarks     - Optional text.
</pre>
<hr/>
<h4 class="section-head">Anatomy of a Section File</h4>
<pre class="code">
~/cyco-projects/foo/verse.lisp


;; Create section object and bind to symbol VERSE
;;     The section becomes the 'current' section in *PROJECT*
;;     The CYCO prompt is updated to indicate the current section.
;;

(section verse :bars 4) 

;; Optional metronome part.
;; 

(metronome)

;; Create parts here...
;;    For illustration assume the parts verse-kick,
;;    verse-snare, verse-bass and verse-piano have
;;    been created.

;; Create part groups.  Groups are used for the purpose of 
;;     muting or soloing collections of parts.  These group 
;;     objects are bound to PERCUSSION and INSTRUMENTS respectively.

(group percussion '(verse-kick verse-snare))
(group instruments '(verse-bass verse-piano))

;; Set mute state of groups and individual parts.
;;    Possible states are :mute :unmute :solo and nil
;;    A nil value does not alter the current status.
;;

(mute percussion  :unmute)
(mute instruments :unmute)
(mute metronome   :mute)
(mute verse-kick  nil)
(mute verse-snare nil)
(mute verse-bass  nil)
(mute verse-piano nil)

;; Create two section MIDI files.
;;   The files are saved as: 
;;      ~/cyco-projects/foo/MIDI/verse.mid
;;      ~/.cyco-projects/foo/MIDI/test-verse.mid
;;

(->smf verse)
(->smf verse :repeat 8 :filename "test-filename")

</pre>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#top">Top</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="home.html">Home</a>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="navigation" href="contents.html">Contents</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Previous:</b>&nbsp;<a class="navigation" href="projects.html">Projects</a>
&nbsp;&nbsp;&nbsp;&nbsp;<b class="navigation">Next:</b>&nbsp;<a class="navigation" href="parts.html">Parts</a>

</div>
</body>
</html>
